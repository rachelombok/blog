<!DOCTYPE html>
<html lang='en-us'>
<head>
    <meta charset="utf-8">
    <title>Express Responds with Base64 Encoded Image | rachel&#39;s blog</title>
    <meta name="description" content="I want to create an endpoint that will respond with a 1x1 pixel PNG file. Instead of using the sendFile method, I choose to use the base64 encoded representation since the file size is super small. ‚Ä¶">
    <meta name="viewport" content="width=device-width, initial-scale=1"><meta property="og:title" content="Express Responds with Base64 Encoded Image" />
<meta property="og:description" content="I want to create an endpoint that will respond with a 1x1 pixel PNG file. Instead of using the sendFile method, I choose to use the base64 encoded representation since the file size is super small. This way I can avoid accessing the file system entirely.
Here&rsquo;s the gist:
const express = require(&#34;express&#34;); const app = express(); app.get(&#34;/test.png&#34;, (req, res) =&gt; { // A 1x1 pixel red colored PNG file.  const img = Buffer." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://smith.github.io/code/express-responds-with-base64-image/" /><meta property="og:image" content="https://smith.github.io/img/express.png" /><meta property="article:section" content="code" />
<meta property="article:published_time" content="2018-12-04T10:16:00&#43;02:00" />
<meta property="article:modified_time" content="2018-12-04T10:16:00&#43;02:00" /><meta property="og:site_name" content="Software Engineering" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://smith.github.io/img/express.png"/>

<meta name="twitter:title" content="Express Responds with Base64 Encoded Image"/>
<meta name="twitter:description" content="I want to create an endpoint that will respond with a 1x1 pixel PNG file. Instead of using the sendFile method, I choose to use the base64 encoded representation since the file size is super small. This way I can avoid accessing the file system entirely.
Here&rsquo;s the gist:
const express = require(&#34;express&#34;); const app = express(); app.get(&#34;/test.png&#34;, (req, res) =&gt; { // A 1x1 pixel red colored PNG file.  const img = Buffer."/>
<link rel="sitemap" type="application/xml" href="/sitemap.xml">
    <link rel="stylesheet" href="https://smith.github.io/styles.min.9606769ff64b7bcb06eaeff008d91ef001a5fffd74383d9b698531628b2f525e.css">
    <link rel=icon href='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y=".9em" font-size="90">üç£</text></svg>'></head>
<body>
<header>
    <a href="/" class='blog-title'>
       
        <h1>blog.</h1>
    </a>
    <nav>
        <a href="/categories/">Categories</a>
        
        <a href="/about/">About</a>
    </nav>
</header>
<main>
<article>
    <h1 class='article-title'>Express Responds with Base64 Encoded Image</h1><time datetime='2018-12-04T10:16:00&#43;02:00'>2018-12-04</time><p>I want to create an endpoint that will respond with a 1x1 pixel PNG file. Instead of using the <a href="https://expressjs.com/en/4x/api.html#res.sendFile"><code>sendFile</code></a> method, I choose to use the base64 encoded representation since the file size is super small. This way I can avoid accessing the file system entirely.</p>
<p>Here&rsquo;s the gist:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">const</span> express <span style="color:#ff79c6">=</span> require(<span style="color:#f1fa8c">&#34;express&#34;</span>);

<span style="color:#ff79c6">const</span> app <span style="color:#ff79c6">=</span> express();

app.get(<span style="color:#f1fa8c">&#34;/test.png&#34;</span>, (req, res) =&gt; {
  <span style="color:#6272a4">// A 1x1 pixel red colored PNG file.
</span><span style="color:#6272a4"></span>  <span style="color:#ff79c6">const</span> img <span style="color:#ff79c6">=</span> Buffer.from(<span style="color:#f1fa8c">&#34;iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8z8DwHwAFBQIAX8jx0gAAAABJRU5ErkJggg==&#34;</span>, <span style="color:#f1fa8c">&#34;base64&#34;</span>);

  res.send(img);
});
</code></pre></div><p>Note that when you pass a <code>Buffer</code>, the <code>content-type</code> header will be set to <code>application/octet-stream</code>.</p>
<footer>
        <ul>
            <li>
                <span>Categories:&nbsp;</span><a href="/categories/snippet/">snippet</a></li>
            <li>
                <span>Tags:&nbsp;</span><a href="/tags/javascript/">javascript</a>,&nbsp;<a href="/tags/node/">node</a></li><li><span>Next:&nbsp;</span><a href="https://smith.github.io/code/how-to-clear-nunjucks-cache/">How to Clear Nunjucks Cache</a></li><li><span>Previous:&nbsp;</span><a href="https://smith.github.io/code/regenerator-runtime-is-not-defined/">Regenerator Runtime is not defined</a></li></ul>
    </footer></article>
</main>
<footer>
    <small>&copy; Rachel Ombok 2021</small>
    <nav>
        <small><a href="https://github.com/rachelombok">Github</a>
        <a href="https://twitter.com/therachelplan">Twitter</a>
        <a href="https://rachelombok.com/">Main</a></small>
    </nav>
</footer></body>
</html>